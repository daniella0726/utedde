<style>
@import url('https://fonts.googleapis.com/css?family=Heebo:300,400,500,700&display=swap');
.pregunta {
  padding: 12px 30px;
  width: 100%;
  display: block;
  text-align: left;
  color: #3C454C;
  font-family: 'Heebo';
  border: 1px solid #43a2d2;
  font-size: 18px;
  cursor: pointer;
  position: relative;
  z-index: 2;
  transition: color 200ms ease-in;
  overflow: hidden;
}
</style>
<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<script src="https://kit.fontawesome.com/1f7411956b.js"></script>



<div class="container">

  <h1 style="font-family: 'Heebo', sans-serif; color: #254064; text-align: center;" >Gráficos Estudiantes</h1>
  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p1" role="button" aria-expanded="false" aria-controls="collapse_p1">
      P1. Distribución por grado
    </a>
  </p>
  <div class="collapse" id="collapse_p1">
    <div class="card card-body">
      <% total  = 0 %>
        <% Estudiante.group(:p1).having("p1 != ?", "--").having("p1 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
            <% total = total + item %>
        <%end%>
        <% array = [] %>
        <% Estudiante.group(:p1).having("p1 != ?", "--").having("p1 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
            <% array.push([value, (100*item/total.to_f).round(2), item]) %>   
        <%end%>
        <%= bar_chart array , name:"relativo" , colors: ["#42B598"] , suffix: "%"%>
        <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% Estudiante.group(:p1).having("p1 != ?", "--").having("p1 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
              <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=value%></th>
                <td style="text-align: center;"><%=item%></td>
                <td style="text-align: center;"><%=(100*item/total.to_f).round(2)%></td>
              </tr>  
        <%end%>
              <tr class="table-dark" style="text-align: center;">
                <th scope="row" style="text-align: center;">Total</th>
                <td style="text-align: center;"><%= total%></td>
                <td style="text-align: center;">100%</td>
              </tr>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>

  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p2" role="button" aria-expanded="false" aria-controls="collapse_p2">
      P2. Distribución por género
    </a>
  </p>
  <div class="collapse" id="collapse_p2">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p2).having("p2 != ?", "--").having("p2 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p2).having("p2 != ?", "--").having("p2 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% valor = "" %>
          <% if (value == "2") %>
            <%valor = "Femenino"%>
          <% else %>
            <%valor = "Masculino"%>
          <% end %>
          <% array.push([valor, (100*item/total.to_f).round(2)]) %>   
      <%end%>

      <%= bar_chart array, colors: ["#E84E0F"] , suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% Estudiante.group(:p2).having("p2 != ?", "--").having("p2 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
               <% if (value == "2") %>
                  <%valor = "Femenino"%>
                <% else %>
                  <%valor = "Masculino"%>
                <% end %>
              <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=valor%></th>
                <td style="text-align: center;"><%=item%></td>
                <td style="text-align: center;"><%=(100*item/total.to_f).round(2)%></td>
              </tr>  
        <%end%>
              <tr class="table-dark" style="text-align: center;">
                <th scope="row" style="text-align: center;">Total</th>
                <td style="text-align: center;"><%= total%></td>
                <td style="text-align: center;">100%</td>
              </tr>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>

  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p4" role="button" aria-expanded="false" aria-controls="collapse_p4">
      P4. Con quien Vives
    </a>
  </p>
  <div class="collapse" id="collapse_p4">
    <div class="card card-body">
      <% total  = 0 %>
        <% Estudiante.group(:created_at).count(:id).each do |value,item|%>
          <% total = total + item %>
        <%end%>

        <% array = [] %>
        <% Estudiante.group(:p4_1).where(p4_1: "1").having("p4_1 != ?", "--").having("p4_1 != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Papa", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p4_2).where(p4_2: "1").having("p4_2 != ?", "--").having("p4_2 != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Padrastro", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p4_3).where(p4_3: "1").having("p4_3 != ?", "--").having("p4_3 != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Mamá", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p4_4).where(p4_4: "1").having("p4_4 != ?", "--").having("p4_4 != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Madrastra", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p4_5).where(p4_5: "1").having("p4_5 != ?", "--").having("p4_5 != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Herman@s", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p4_6).where(p4_6: "1").having("p4_6 != ?", "--").having("p4_6 != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Prim@s", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p4_7).where(p4_7: "1").having("p4_7 != ?", "--").having("p4_7 != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Tí@s", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p4_8).where(p4_8: "1").having("p4_8 != ?", "--").having("p4_8 != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Abuel@s", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p4_9).where(p4_9: "1").having("p4_9 != ?", "--").having("p4_9 != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Tu espos@", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p4_10).where(p4_10: "1").having("p4_10 != ?", "--").having("p4_10 != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Tus hij@s", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p4_11).where(p4_11: "1").having("p4_11 != ?", "--").having("p4_11 != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Otros Familiares", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p4_12).where(p4_12: "1").having("p4_12 != ?", "--").having("p4_12 != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Otros no Parientes", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p4_13).where(p4_13: "1").having("p4_13 != ?", "--").having("p4_13 != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Sol@", (100*item/total.to_f).round(2), item]) %>
        <%end%> 
        <% array = array.sort {|a,b| b[1] <=> a[1]} %>
        <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <%= column_chart array, suffix: "%" %>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>

  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p5a" role="button" aria-expanded="false" aria-controls="collapse_p5a">
      P5A. ¿Cuál es el nivel educativo más alto alcanzado por tus padres y por la persona adulta (distinta a tus padres) con quien permaneces la mayor parte del tiempo? - Papá - Padrastro
    </a>
  </p>
  <div class="collapse" id="collapse_p5a">
    <div class="card card-body">
     <% total  = 0 %>
      <% Estudiante.group(:p5a).having("p5a != ?", "--").having("p5a != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
      <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p5a).having("p5a != ?", "--").having("p5a != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% valor = "" %>
        <% if (value == "1") %>
          <%valor = "Algunos años de primaria"%>
        <% elsif (value == "2") %>
          <%valor = "Toda la primaria"%>
        <% elsif (value == "3") %>
          <%valor = "Algunos años de bachillerato"%>
        <% elsif (value == "4") %>
          <%valor = "Todo el bachillerato"%>
        <% elsif (value == "5") %>
          <%valor = "Uno o mas años de educación técnica o tecnológica"%>
        <% elsif (value == "6") %>
          <%valor = "Carrera técnica o tecnológica"%>
        <% elsif (value == "7") %>
          <%valor = "Uno o mas años de universidad"%>
        <% elsif (value == "8") %>
          <%valor = "Carrera universitaria"%>
        <% elsif (value == "9") %>
          <%valor = "Postgrado (estudios después de la universidad)"%>
        <% elsif (value == "10") %>
          <%valor = "Ninguno"%>
        <% elsif (value == "99") %>
          <%valor = "No sabe - no responde"%>
        <% end %>
        <% array.push([valor, (100*item/total.to_f).round(2)]) %>   
      <%end%>
          <%= pie_chart array ,suffix: "%" %>
          <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% Estudiante.group(:p5a).having("p5a != ?", "--").having("p5a != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
              <% if (value == "1") %>
                <%valor = "Algunos años de primaria"%>
              <% elsif (value == "2") %>
                <%valor = "Toda la primaria"%>
              <% elsif (value == "3") %>
                <%valor = "Algunos años de bachillerato"%>
              <% elsif (value == "4") %>
                <%valor = "Todo el bachillerato"%>
              <% elsif (value == "5") %>
                <%valor = "Uno o mas años de educación técnica o tecnológica"%>
              <% elsif (value == "6") %>
                <%valor = "Carrera técnica o tecnológica"%>
              <% elsif (value == "7") %>
                <%valor = "Uno o mas años de universidad"%>
              <% elsif (value == "8") %>
                <%valor = "Carrera universitaria"%>
              <% elsif (value == "9") %>
                <%valor = "Postgrado (estudios después de la universidad)"%>
              <% elsif (value == "10") %>
                <%valor = "Ninguno"%>
              <% elsif (value == "99") %>
                <%valor = "No sabe - no responde"%>
              <% end %>
              <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=valor%></th>
                <td style="text-align: center;"><%=item%></td>
                <td style="text-align: center;"><%=(100*item/total.to_f).round(2)%></td>
              </tr>  
        <%end%>
              <tr class="table-dark" style="text-align: center;">
                <th scope="row" style="text-align: center;">Total</th>
                <td style="text-align: center;"><%= total%></td>
                <td style="text-align: center;">100%</td>
              </tr>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>

  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p5b" role="button" aria-expanded="false" aria-controls="collapse_p5b">
      P5B. ¿Cuál es el nivel educativo más alto alcanzado por tus padres y por la persona adulta (distinta a tus padres) con quien permaneces la mayor parte del tiempo? - Mamá - Madrastra
    </a>
  </p>
  <div class="collapse" id="collapse_p5b">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p5b).having("p5b != ?", "--").having("p5b != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
      <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p5b).having("p5b != ?", "--").having("p5b != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% valor = "" %>
      <% if (value == "1") %>
        <%valor = "Algunos años de primaria"%>
      <% elsif (value == "2") %>
        <%valor = "Toda la primaria"%>
      <% elsif (value == "3") %>
        <%valor = "Algunos años de bachillerato"%>
      <% elsif (value == "4") %>
        <%valor = "Todo el bachillerato"%>
      <% elsif (value == "5") %>
        <%valor = "Uno o mas años de educación técnica o tecnológica"%>
      <% elsif (value == "6") %>
        <%valor = "Carrera técnica o tecnológica"%>
      <% elsif (value == "7") %>
        <%valor = "Uno o mas años de universidad"%>
      <% elsif (value == "8") %>
        <%valor = "Carrera universitaria"%>
      <% elsif (value == "9") %>
        <%valor = "Postgrado (estudios después de la universidad)"%>
      <% elsif (value == "10") %>
        <%valor = "Ninguno"%>
      <% elsif (value == "99") %>
        <%valor = "No sabe - no responde"%>
      <% end %>
      <% array.push([valor, (100*item/total.to_f).round(2)]) %>   
      <%end%>
      <%= pie_chart array ,suffix: "%" %>
       <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% Estudiante.group(:p5b).having("p5b != ?", "--").having("p5b != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
              <% valor = "" %>
                <% if (value == "1") %>
                  <%valor = "Algunos años de primaria"%>
                <% elsif (value == "2") %>
                  <%valor = "Toda la primaria"%>
                <% elsif (value == "3") %>
                  <%valor = "Algunos años de bachillerato"%>
                <% elsif (value == "4") %>
                  <%valor = "Todo el bachillerato"%>
                <% elsif (value == "5") %>
                  <%valor = "Uno o mas años de educación técnica o tecnológica"%>
                <% elsif (value == "6") %>
                  <%valor = "Carrera técnica o tecnológica"%>
                <% elsif (value == "7") %>
                  <%valor = "Uno o mas años de universidad"%>
                <% elsif (value == "8") %>
                  <%valor = "Carrera universitaria"%>
                <% elsif (value == "9") %>
                  <%valor = "Postgrado (estudios después de la universidad)"%>
                <% elsif (value == "10") %>
                  <%valor = "Ninguno"%>
                <% elsif (value == "99") %>
                  <%valor = "No sabe - no responde"%>
                <% end %>
              <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=valor%></th>
                <td style="text-align: center;"><%=item%></td>
                <td style="text-align: center;"><%=(100*item/total.to_f).round(2)%></td>
              </tr>  
        <%end%>
              <tr class="table-dark" style="text-align: center;">
                <th scope="row" style="text-align: center;">Total</th>
                <td style="text-align: center;"><%= total%></td>
                <td style="text-align: center;">100%</td>
              </tr>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>

  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p5c" role="button" aria-expanded="false" aria-controls="collapse_p5c">
      P5C. ¿Cuál es el nivel educativo más alto alcanzado por tus padres y por la persona adulta (distinta a tus padres) con quien permaneces la mayor parte del tiempo? - Persona adulta (distinta a tus padres) con quien permaneces la mayor parte del tiempo
    </a>
  </p>
  <div class="collapse" id="collapse_p5c">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p5c).having("p5c != ?", "--").having("p5c != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
      <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p5c).having("p5c != ?", "--").having("p5c != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
      <% valor = "" %>
      <% if (value == "1") %>
        <%valor = "Algunos años de primaria"%>
      <% elsif (value == "2") %>
        <%valor = "Toda la primaria"%>
      <% elsif (value == "3") %>
        <%valor = "Algunos años de bachillerato"%>
      <% elsif (value == "4") %>
        <%valor = "Todo el bachillerato"%>
      <% elsif (value == "5") %>
        <%valor = "Uno o mas años de educación técnica o tecnológica"%>
      <% elsif (value == "6") %>
        <%valor = "Carrera técnica o tecnológica"%>
      <% elsif (value == "7") %>
        <%valor = "Uno o mas años de universidad"%>
      <% elsif (value == "8") %>
        <%valor = "Carrera universitaria"%>
      <% elsif (value == "9") %>
        <%valor = "Postgrado (estudios después de la universidad)"%>
      <% elsif (value == "10") %>
        <%valor = "Ninguno"%>
      <% elsif (value == "99") %>
        <%valor = "No sabe - no responde"%>
      <% end %>
      <% array.push([valor, (100*item/total.to_f).round(2)]) %>   
      <%end%>
      <%= pie_chart array ,suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% Estudiante.group(:p5c).having("p5c != ?", "--").having("p5c != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
              <% valor = "" %>
                <% if (value == "1") %>
                  <%valor = "Algunos años de primaria"%>
                <% elsif (value == "2") %>
                  <%valor = "Toda la primaria"%>
                <% elsif (value == "3") %>
                  <%valor = "Algunos años de bachillerato"%>
                <% elsif (value == "4") %>
                  <%valor = "Todo el bachillerato"%>
                <% elsif (value == "5") %>
                  <%valor = "Uno o mas años de educación técnica o tecnológica"%>
                <% elsif (value == "6") %>
                  <%valor = "Carrera técnica o tecnológica"%>
                <% elsif (value == "7") %>
                  <%valor = "Uno o mas años de universidad"%>
                <% elsif (value == "8") %>
                  <%valor = "Carrera universitaria"%>
                <% elsif (value == "9") %>
                  <%valor = "Postgrado (estudios después de la universidad)"%>
                <% elsif (value == "10") %>
                  <%valor = "Ninguno"%>
                <% elsif (value == "99") %>
                  <%valor = "No sabe - no responde"%>
                <% end %>
              <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=valor%></th>
                <td style="text-align: center;"><%=item%></td>
                <td style="text-align: center;"><%=(100*item/total.to_f).round(2)%></td>
              </tr>  
        <%end%>
              <tr class="table-dark" style="text-align: center;">
                <th scope="row" style="text-align: center;">Total</th>
                <td style="text-align: center;"><%= total%></td>
                <td style="text-align: center;">100%</td>
              </tr>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>

  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p6" role="button" aria-expanded="false" aria-controls="collapse_p6">
      P6. ¿Te reconoces como…?
    </a>
  </p>
  <div class="collapse" id="collapse_p6">
    <div class="card card-body">
      <% total  = 0 %>
        <% Estudiante.group(:created_at).count(:id).each do |value,item|%>
          <% total = total + item %>
        <%end%>

        <% array = [] %>
        <% Estudiante.group(:p6_1).where(p6_1: "1").having("p6_1 != ?", "--").having("p6_1 != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Indígena", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p6_2).where(p6_2: "1").having("p6_2 != ?", "--").having("p6_2 != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Gitano(a)", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p6_3).where(p6_3: "1").having("p6_3 != ?", "--").having("p6_3 != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Negro(a) - Afro", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p6_4).where(p6_4: "1").having("p6_4 != ?", "--").having("p6_4 != ?", "").count(:id).each do |value,item|%>
          <% array.push(["victima del conflicto armado interno", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p6_5).where(p6_5: "1").having("p6_5 != ?", "--").having("p6_5 != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Migrante del exterior", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p6_6).where(p6_6: "1").having("p6_6 != ?", "--").having("p6_6 != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Ninguna de las anteriores", (100*item/total.to_f).round(2), item]) %>
        <%end%>
    
        <% array = array.sort {|a,b| b[1] <=> a[1]} %>
        <%= bar_chart array, suffix: "%" %>

        <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>

  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p7" role="button" aria-expanded="false" aria-controls="collapse_p7">
     P7. ¿Siempre has vivido en Bogotá?
    </a>
  </p>
  <div class="collapse" id="collapse_p7">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p7).having("p7 != ?", "--").having("p7 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p7).having("p7 != ?", "--").having("p7 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% array.push([value, (100*item/total.to_f).round(2), item]) %>   
      <%end%>
      <%= bar_chart array, suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              <tr class="table-dark" style="text-align: center;">
                <th scope="row" style="text-align: center;">Total</th>
                <td style="text-align: center;"><%= total%></td>
                <td style="text-align: center;">100%</td>
              </tr>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>

  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p7b" role="button" aria-expanded="false" aria-controls="collapse_p7b">
     P7B. ¿Cuál fue la principal razón por la que cambiaste de municipio, ciudad, departamento, país?
    </a>
  </p>
  <div class="collapse" id="collapse_p7b">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p7b).having("p7b != ?", "--").having("p7b != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
      <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p7b).having("p7b != ?", "--").having("p7b != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% valor = "" %>
        <% if (value == "1") %>
          <%valor = "Porque había problemas de plata en la familia"%>
        <% elsif (value == "2") %>
          <%valor = "Por problemas de plata (no encontraba trabajo)"%>
        <% elsif (value == "3") %>
          <%valor = "Por desastre natural (inundación, avalancha, terremoto, etc. )"%>
        <% elsif (value == "4") %>
          <%valor = "Por la situación de desplazamiento por conflicto armado interno"%>
        <% elsif (value == "5") %>
          <%valor = "Porque tu familia o tú fueron víctimas de desplazamiento forzado"%>
        <% elsif (value == "6") %>
          <%valor = "Por oportunidades de educación"%>
        <% elsif (value == "7") %>
          <%valor = "Por motivos de salud"%>
        <% elsif (value == "8") %>
          <%valor = "Por problemas sociopoliticos de mi pais (ej; crisis en Venezuela)"%>
        <% elsif (value == "9") %>
          <%valor = "Por separación de tus padres"%>
        <% elsif (value == "10") %>
          <%valor = "Por separación de tu cónyuge o pareja permanente"%>
        <% elsif (value == "otro") %>
          <%valor = "Otra"%>
        <% end %>
        <% array.push([valor, (100*item/total.to_f).round(2)]) %>   
      <%end%>
      <%= pie_chart array , suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% Estudiante.group(:p7b).having("p7b != ?", "--").having("p7b != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
              <% valor = "" %>
              <% if (value == "1") %>
                <%valor = "Porque había problemas de plata en la familia"%>
              <% elsif (value == "2") %>
                <%valor = "Por problemas de plata (no encontraba trabajo)"%>
              <% elsif (value == "3") %>
                <%valor = "Por desastre natural (inundación, avalancha, terremoto, etc. )"%>
              <% elsif (value == "4") %>
                <%valor = "Por la situación de desplazamiento por conflicto armado interno"%>
              <% elsif (value == "5") %>
                <%valor = "Porque tu familia o tú fueron víctimas de desplazamiento forzado"%>
              <% elsif (value == "6") %>
                <%valor = "Por oportunidades de educación"%>
              <% elsif (value == "7") %>
                <%valor = "Por motivos de salud"%>
              <% elsif (value == "8") %>
                <%valor = "Por problemas sociopoliticos de mi pais (ej; crisis en Venezuela)"%>
              <% elsif (value == "9") %>
                <%valor = "Por separación de tus padres"%>
              <% elsif (value == "10") %>
                <%valor = "Por separación de tu cónyuge o pareja permanente"%>
              <% elsif (value == "otro") %>
                <%valor = "Otra"%>
              <% end %>
              <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=valor%></th>
                <td style="text-align: center;"><%=item%></td>
                <td style="text-align: center;"><%=(100*item/total.to_f).round(2)%></td>
              </tr>  
        <%end%>
              <tr class="table-dark" style="text-align: center;">
                <th scope="row" style="text-align: center;">Total</th>
                <td style="text-align: center;"><%= total%></td>
                <td style="text-align: center;">100%</td>
              </tr>
              </tbody>
        </table>
        </div>

    </div>
  </div>
  <br>

  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p8" role="button" aria-expanded="false" aria-controls="collapse_p8">
      P8. Durante el ÚLTIMO AÑO, ¿de los siguientes problemas, cuales se han presentado en tu hogar?
    </a>
  </p>
  <div class="collapse" id="collapse_p8">
    <div class="card card-body">
      <% total  = 0 %>
        <% Estudiante.group(:created_at).count(:id).each do |value,item|%>
          <% total = total + item %>
        <%end%>

        <% array = [] %>
        <% Estudiante.group(:p8a).where(p8a: "1").having("p8a != ?", "--").having("p8a != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Enfermedad grave de algún miembro del hogar", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p8b).where(p8b: "1").having("p8b != ?", "--").having("p8b != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Muerte de alguno de los miembros del hogar", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p8c).where(p8c: "1").having("p8c != ?", "--").having("p8c != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Algún menor de 18 años se fue del hogar", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p8d).where(p8d: "1").having("p8d != ?", "--").having("p8d != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Alguno de los padres tuvo que irse del hogar", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p8e).where(p8e: "1").having("p8e != ?", "--").having("p8e != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Separación de los padres o el cónyuge", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p8f).where(p8f: "1").having("p8f != ?", "--").having("p8f != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Problemas de plata", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p8g).where(p8g: "1").having("p8g != ?", "--").having("p8g != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Ninguna de las anteriores", (100*item/total.to_f).round(2), item]) %>
        <%end%>
    
        <% array = array.sort {|a,b| b[1] <=> a[1]} %>
        <%= bar_chart array, suffix: "%" %>
        <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
       
    </div>
  </div>
  <br>

  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p9" role="button" aria-expanded="false" aria-controls="collapse_p9">
     P9. ¿Alguna de las personas que vive contigo tiene alguna discapacidad (es ciega, sorda, usa silla de ruedas de manera permanente, tiene discapacidad intelectual, etc.)?
    </a>
  </p>
  <div class="collapse" id="collapse_p9">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p9).having("p9 != ?", "--").having("p9 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
      <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p9).having("p9 != ?", "--").having("p9 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% if (value == "si") %>
          <%valor = "Si"%>
        <% elsif (value == "no") %>
          <%valor = "No"%>
        <% elsif (value == "99") %>
          <%valor = "No sabe - no responde"%>
        <% end %>
        <% array.push([valor, (100*item/total.to_f).round(2)]) %>   
      <%end%>
      <%= bar_chart array, colors: ["#E84E0F"] , suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% Estudiante.group(:p9).having("p9 != ?", "--").having("p9 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% if (value == "si") %>
          <%valor = "Si"%>
        <% elsif (value == "no") %>
          <%valor = "No"%>
        <% elsif (value == "99") %>
          <%valor = "No sabe - no responde"%>
        <% end %>
              <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=valor%></th>
                <td style="text-align: center;"><%=item%></td>
                <td style="text-align: center;"><%=(100*item/total.to_f).round(2)%></td>
              </tr>  
        <%end%>
              <tr class="table-dark" style="text-align: center;">
                <th scope="row" style="text-align: center;">Total</th>
                <td style="text-align: center;"><%= total%></td>
                <td style="text-align: center;">100%</td>
              </tr>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>

  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p10" role="button" aria-expanded="false" aria-controls="collapse_p10">
     P10. ¿Antes de iniciar la primaria, ... estuviste en algún jardín?
    </a>
  </p>
  <div class="collapse" id="collapse_p10">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p10).having("p10 != ?", "--").having("p10 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
      <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p10).having("p10 != ?", "--").having("p10 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% array.push([value, (100*item/total.to_f).round(2)]) %>   
      <%end%>
      <%= bar_chart array, suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% Estudiante.group(:p10).having("p10 != ?", "--").having("p10 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
              <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=value%></th>
                <td style="text-align: center;"><%=item%></td>
                <td style="text-align: center;"><%=(100*item/total.to_f).round(2)%></td>
              </tr>  
        <%end%>
              <tr class="table-dark" style="text-align: center;">
                <th scope="row" style="text-align: center;">Total</th>
                <td style="text-align: center;"><%= total%></td>
                <td style="text-align: center;">100%</td>
              </tr>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>

  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p10a" role="button" aria-expanded="false" aria-controls="collapse_p10a">
      P10A. Cuántos años estuviste en el jardín?
    </a>
  </p>
  <div class="collapse" id="collapse_p10a">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p10a).having("p10a != ?", "--").having("p10a != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
      <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p10a).having("p10a != ?", "--").having("p10a != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% if (value == "1") %>
          <%valor = "1 año"%>
        <% elsif (value == "2") %>
          <%valor = "2 años"%>
        <% elsif (value == "3") %>
          <%valor = "3 años"%>
        <% elsif (value == "mas") %>
          <%valor = "Más Años"%>
        <% elsif (value == "99") %>
          <%valor = "No Recuerda"%>
        <% end %>
        <% array.push([valor, (100*item/total.to_f).round(2)]) %>   
      <%end%>
      <%= bar_chart array, colors: ["#E84E0F"] , suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% Estudiante.group(:p10a).having("p10a != ?", "--").having("p10a != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% if (value == "1") %>
            <%valor = "1 año"%>
          <% elsif (value == "2") %>
            <%valor = "2 años"%>
          <% elsif (value == "3") %>
            <%valor = "3 años"%>
          <% elsif (value == "mas") %>
            <%valor = "Más Años"%>
          <% elsif (value == "99") %>
            <%valor = "No Recuerda"%>
          <% end %>
              <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=valor%></th>
                <td style="text-align: center;"><%=item%></td>
                <td style="text-align: center;"><%=(100*item/total.to_f).round(2)%></td>
              </tr>  
        <%end%>
              <tr class="table-dark" style="text-align: center;">
                <th scope="row" style="text-align: center;">Total</th>
                <td style="text-align: center;"><%= total%></td>
                <td style="text-align: center;">100%</td>
              </tr>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>

  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p11" role="button" aria-expanded="false" aria-controls="collapse_p11">
      p11. ¿Cuántos años cumplidos tenías cuando hiciste primero de primaria?
    </a>
  </p>
  <div class="collapse" id="collapse_p11">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p11).having("p11 != ?", "--").having("p11 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
      <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p11).having("p11 != ?", "--").having("p11 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% if (value == "4") %>
          <%valor = "4 años"%>
        <% elsif (value == "5") %>
          <%valor = "5 años"%>
        <% elsif (value == "6") %>
          <%valor = "6 año"%>
        <% elsif (value == "7") %>
          <%valor = "7 años"%>
        <% elsif (value == "8") %>
          <%valor = "8 años"%>
        <% elsif (value == "9") %>
          <%valor = "9 años"%>
        <% elsif (value == "10") %>
          <%valor = "10 años"%>
        <% elsif (value == "11") %>
          <%valor = "11 años"%>
        <% elsif (value == "mas") %>
          <%valor = "Más años"%>
        <% elsif (value == "99") %>
          <%valor = "No Recuerda"%>
        <% end %>
        <% array.push([valor, (100*item/total.to_f).round(2)]) %>   
      <%end%>
      <%= bar_chart array, colors: ["#E84E0F"] , suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
       <% Estudiante.group(:p11).having("p11 != ?", "--").having("p11 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% if (value == "4") %>
          <%valor = "4 años"%>
        <% elsif (value == "5") %>
          <%valor = "5 años"%>
        <% elsif (value == "6") %>
          <%valor = "6 año"%>
        <% elsif (value == "7") %>
          <%valor = "7 años"%>
        <% elsif (value == "8") %>
          <%valor = "8 años"%>
        <% elsif (value == "9") %>
          <%valor = "9 años"%>
        <% elsif (value == "10") %>
          <%valor = "10 años"%>
        <% elsif (value == "11") %>
          <%valor = "11 años"%>
        <% elsif (value == "mas") %>
          <%valor = "Más años"%>
        <% elsif (value == "99") %>
          <%valor = "No Recuerda"%>
        <% end %>
              <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=valor%></th>
                <td style="text-align: center;"><%=item%></td>
                <td style="text-align: center;"><%=(100*item/total.to_f).round(2)%></td>
              </tr>  
        <%end%>
              <tr class="table-dark" style="text-align: center;">
                <th scope="row" style="text-align: center;">Total</th>
                <td style="text-align: center;"><%= total%></td>
                <td style="text-align: center;">100%</td>
              </tr>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>

  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p12" role="button" aria-expanded="false" aria-controls="collapse_p12">
      P12. Has perdido algún curso (año)?
    </a>
  </p>
  <div class="collapse" id="collapse_p12">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p12).having("p12 != ?", "--").having("p12 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
      <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p12).having("p12 != ?", "--").having("p12 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% array.push([value, (100*item/total.to_f).round(2)]) %>   
      <%end%>
      <%= bar_chart array, colors: ["#E84E0F"] , suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% Estudiante.group(:p12).having("p12 != ?", "--").having("p12 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
              <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=value%></th>
                <td style="text-align: center;"><%=item%></td>
                <td style="text-align: center;"><%=(100*item/total.to_f).round(2)%></td>
              </tr>  
        <%end%>
              <tr class="table-dark" style="text-align: center;">
                <th scope="row" style="text-align: center;">Total</th>
                <td style="text-align: center;"><%= total%></td>
                <td style="text-align: center;">100%</td>
              </tr>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>

  <div class="container row">
  <h4 style="font-family: 'Heebo', sans-serif; color: #254064; text-align: left;" >P12 A. Sí has perdido algún curso (año)</h4>

  <div class="col-sm-3">

  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p12a_1" role="button" aria-expanded="false" aria-controls="collapse_p12a_1">
      ¿1er Qué curso?
    </a>
  </p>
  <div class="collapse" id="collapse_p12a_1">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p12a_1).having("p12a_1 != ?", "--").having("p12a_1 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
      <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p12a_1).having("p12a_1 != ?", "--").having("p12a_1 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% array.push([value, (100*item/total.to_f).round(2)]) %>   
      <%end%>
      <%= bar_chart array, colors: ["#E84E0F"] , suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% Estudiante.group(:p12a_1).having("p12a_1 != ?", "--").having("p12a_1 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
              <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=value%></th>
                <td style="text-align: center;"><%=item%></td>
                <td style="text-align: center;"><%=(100*item/total.to_f).round(2)%></td>
              </tr>  
        <%end%>
              <tr class="table-dark" style="text-align: center;">
                <th scope="row" style="text-align: center;">Total</th>
                <td style="text-align: center;"><%= total%></td>
                <td style="text-align: center;">100%</td>
              </tr>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>
  </div>

  <div class="col-sm-3">
  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p12a_2" role="button" aria-expanded="false" aria-controls="collapse_p12a_2">
      ¿2do Qué curso?
    </a>
  </p>
  <div class="collapse" id="collapse_p12a_2">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p12a_2).having("p12a_2 != ?", "--").having("p12a_2 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
      <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p12a_2).having("p12a_2 != ?", "--").having("p12a_2 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% array.push([value, (100*item/total.to_f).round(2)]) %>   
      <%end%>
      <%= bar_chart array, colors: ["#E84E0F"] , suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% Estudiante.group(:p12a_2).having("p12a_2 != ?", "--").having("p12a_2 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
              <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=value%></th>
                <td style="text-align: center;"><%=item%></td>
                <td style="text-align: center;"><%=(100*item/total.to_f).round(2)%></td>
              </tr>  
        <%end%>
              <tr class="table-dark" style="text-align: center;">
                <th scope="row" style="text-align: center;">Total</th>
                <td style="text-align: center;"><%= total%></td>
                <td style="text-align: center;">100%</td>
              </tr>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>
  </div>

  <div class="col-sm-3">
  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p12a_3" role="button" aria-expanded="false" aria-controls="collapse_p12a_3">
      ¿3er Qué curso?
    </a>
  </p>
  <div class="collapse" id="collapse_p12a_3">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p12a_3).having("p12a_3 != ?", "--").having("p12a_3 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
      <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p12a_3).having("p12a_3 != ?", "--").having("p12a_3 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% array.push([value, (100*item/total.to_f).round(2)]) %>   
      <%end%>
      <%= bar_chart array, colors: ["#E84E0F"] , suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% Estudiante.group(:p12a_3).having("p12a_3 != ?", "--").having("p12a_3 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
              <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=value%></th>
                <td style="text-align: center;"><%=item%></td>
                <td style="text-align: center;"><%=(100*item/total.to_f).round(2)%></td>
              </tr>  
        <%end%>
              <tr class="table-dark" style="text-align: center;">
                <th scope="row" style="text-align: center;">Total</th>
                <td style="text-align: center;"><%= total%></td>
                <td style="text-align: center;">100%</td>
              </tr>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>
  </div>

  <div class="col-sm-3">
  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p12a_4" role="button" aria-expanded="false" aria-controls="collapse_p12a_4">
      ¿4to Qué curso?
    </a>
  </p>
  <div class="collapse" id="collapse_p12a_4">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p12a_4).having("p12a_4 != ?", "--").having("p12a_4 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
      <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p12a_4).having("p12a_4 != ?", "--").having("p12a_4 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% array.push([value, (100*item/total.to_f).round(2)]) %>   
      <%end%>
      <%= bar_chart array, colors: ["#E84E0F"] , suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% Estudiante.group(:p12a_4).having("p12a_4 != ?", "--").having("p12a_4 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
              <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=value%></th>
                <td style="text-align: center;"><%=item%></td>
                <td style="text-align: center;"><%=(100*item/total.to_f).round(2)%></td>
              </tr>  
        <%end%>
              <tr class="table-dark" style="text-align: center;">
                <th scope="row" style="text-align: center;">Total</th>
                <td style="text-align: center;"><%= total%></td>
                <td style="text-align: center;">100%</td>
              </tr>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>
  </div>
  </div>


  <div class="container row">
  <h4 style="font-family: 'Heebo', sans-serif; color: #254064; text-align: left;" >¿El último curso que perdiste fue por alguna de las siguientes razones?:</h4>

  <div class="col-sm-3">
  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p12e" role="button" aria-expanded="false" aria-controls="collapse_p12e">
      Por enfermedad
    </a>
  </p>
  <div class="collapse" id="collapse_p12e">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p12e).having("p12e != ?", "--").having("p12e != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
      <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p12e).having("p12e != ?", "--").having("p12e != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% array.push([value, (100*item/total.to_f).round(2)]) %>   
      <%end%>
      <%= bar_chart array, colors: ["#E84E0F"] , suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% Estudiante.group(:p12e).having("p12e != ?", "--").having("p12e != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
              <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=value%></th>
                <td style="text-align: center;"><%=item%></td>
                <td style="text-align: center;"><%=(100*item/total.to_f).round(2)%></td>
              </tr>  
        <%end%>
              <tr class="table-dark" style="text-align: center;">
                <th scope="row" style="text-align: center;">Total</th>
                <td style="text-align: center;"><%= total%></td>
                <td style="text-align: center;">100%</td>
              </tr>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  </div>
  <br>

  <div class="col-sm-3">
  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p12f" role="button" aria-expanded="false" aria-controls="collapse_p12f">
      Por falta de tiempo para estudiar
    </a>
  </p>
  <div class="collapse" id="collapse_p12f">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p12f).having("p12f != ?", "--").having("p12f != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
      <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p12f).having("p12f != ?", "--").having("p12f != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% array.push([value, (100*item/total.to_f).round(2)]) %>   
      <%end%>
      <%= bar_chart array, colors: ["#E84E0F"] , suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% Estudiante.group(:p12f).having("p12f != ?", "--").having("p12f != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
              <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=value%></th>
                <td style="text-align: center;"><%=item%></td>
                <td style="text-align: center;"><%=(100*item/total.to_f).round(2)%></td>
              </tr>  
        <%end%>
              <tr class="table-dark" style="text-align: center;">
                <th scope="row" style="text-align: center;">Total</th>
                <td style="text-align: center;"><%= total%></td>
                <td style="text-align: center;">100%</td>
              </tr>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>
  </div>

  <div class="col-sm-3">
  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p12g" role="button" aria-expanded="false" aria-controls="collapse_p12g">
      Porque no te gustaba el estudio
    </a>
  </p>
  <div class="collapse" id="collapse_p12g">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p12g).having("p12g != ?", "--").having("p12g != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
      <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p12g).having("p12g != ?", "--").having("p12g != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% array.push([value, (100*item/total.to_f).round(2)]) %>   
      <%end%>
      <%= bar_chart array, colors: ["#E84E0F"] , suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% Estudiante.group(:p12g).having("p12g != ?", "--").having("p12g != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
              <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=value%></th>
                <td style="text-align: center;"><%=item%></td>
                <td style="text-align: center;"><%=(100*item/total.to_f).round(2)%></td>
              </tr>  
        <%end%>
              <tr class="table-dark" style="text-align: center;">
                <th scope="row" style="text-align: center;">Total</th>
                <td style="text-align: center;"><%= total%></td>
                <td style="text-align: center;">100%</td>
              </tr>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>
  </div>

  <div class="col-sm-3">
  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p12h" role="button" aria-expanded="false" aria-controls="collapse_p12h">
      Por problemas de plata en la familia o tuya
    </a>
  </p>
  <div class="collapse" id="collapse_p12h">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p12h).having("p12h != ?", "--").having("p12h != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
      <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p12h).having("p12h != ?", "--").having("p12h != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% array.push([value, (100*item/total.to_f).round(2)]) %>   
      <%end%>
      <%= bar_chart array, colors: ["#E84E0F"] , suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% Estudiante.group(:p12h).having("p12h != ?", "--").having("p12h != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
              <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=value%></th>
                <td style="text-align: center;"><%=item%></td>
                <td style="text-align: center;"><%=(100*item/total.to_f).round(2)%></td>
              </tr>  
        <%end%>
              <tr class="table-dark" style="text-align: center;">
                <th scope="row" style="text-align: center;">Total</th>
                <td style="text-align: center;"><%= total%></td>
                <td style="text-align: center;">100%</td>
              </tr>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>
  </div>
  </div>

  <div class="container row">

  <div class="col-sm-3">
  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p12i" role="button" aria-expanded="false" aria-controls="collapse_p12i">
      Por las peleas y el mal ambiente en la familia
    </a>
  </p>
  <div class="collapse" id="collapse_p12i">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p12i).having("p12i != ?", "--").having("p12i != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
      <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p12i).having("p12i != ?", "--").having("p12i != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% array.push([value, (100*item/total.to_f).round(2)]) %>   
      <%end%>
      <%= bar_chart array, colors: ["#E84E0F"] , suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% Estudiante.group(:p12i).having("p12i != ?", "--").having("p12i != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
              <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=value%></th>
                <td style="text-align: center;"><%=item%></td>
                <td style="text-align: center;"><%=(100*item/total.to_f).round(2)%></td>
              </tr>  
        <%end%>
              <tr class="table-dark" style="text-align: center;">
                <th scope="row" style="text-align: center;">Total</th>
                <td style="text-align: center;"><%= total%></td>
                <td style="text-align: center;">100%</td>
              </tr>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>
  </div>

  <div class="col-sm-3">
  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p12j" role="button" aria-expanded="false" aria-controls="collapse_p12j">
      Por bullying o matoneo
    </a>
  </p>
  <div class="collapse" id="collapse_p12j">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p12j).having("p12j != ?", "--").having("p12j != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
      <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p12j).having("p12j != ?", "--").having("p12j != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% array.push([value, (100*item/total.to_f).round(2)]) %>   
      <%end%>
      <%= bar_chart array, colors: ["#E84E0F"] , suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% Estudiante.group(:p12j).having("p12j != ?", "--").having("p12j != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
              <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=value%></th>
                <td style="text-align: center;"><%=item%></td>
                <td style="text-align: center;"><%=(100*item/total.to_f).round(2)%></td>
              </tr>  
        <%end%>
              <tr class="table-dark" style="text-align: center;">
                <th scope="row" style="text-align: center;">Total</th>
                <td style="text-align: center;"><%= total%></td>
                <td style="text-align: center;">100%</td>
              </tr>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>
  </div>

  <div class="col-sm-3">
  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p12k" role="button" aria-expanded="false" aria-controls="collapse_p12k">
      La forma como enseñaban y calificaban los profesores era inadecuada
    </a>
  </p>
  <div class="collapse" id="collapse_p12k">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p12k).having("p12k != ?", "--").having("p12k != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
      <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p12k).having("p12k != ?", "--").having("p12k != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% array.push([value, (100*item/total.to_f).round(2)]) %>   
      <%end%>
      <%= bar_chart array, colors: ["#E84E0F"] , suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% Estudiante.group(:p12k).having("p12k != ?", "--").having("p12k != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
              <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=value%></th>
                <td style="text-align: center;"><%=item%></td>
                <td style="text-align: center;"><%=(100*item/total.to_f).round(2)%></td>
              </tr>  
        <%end%>
              <tr class="table-dark" style="text-align: center;">
                <th scope="row" style="text-align: center;">Total</th>
                <td style="text-align: center;"><%= total%></td>
                <td style="text-align: center;">100%</td>
              </tr>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>
  </div>

  <div class="col-sm-3">
  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p12m" role="button" aria-expanded="false" aria-controls="collapse_p12m">
      Por expulsión
    </a>
  </p>
  <div class="collapse" id="collapse_p12m">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p12m).having("p12m != ?", "--").having("p12m != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
      <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p12m).having("p12m != ?", "--").having("p12m != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% array.push([value, (100*item/total.to_f).round(2)]) %>   
      <%end%>
      <%= bar_chart array, colors: ["#E84E0F"] , suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% Estudiante.group(:p12m).having("p12m != ?", "--").having("p12m != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
              <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=value%></th>
                <td style="text-align: center;"><%=item%></td>
                <td style="text-align: center;"><%=(100*item/total.to_f).round(2)%></td>
              </tr>  
        <%end%>
              <tr class="table-dark" style="text-align: center;">
                <th scope="row" style="text-align: center;">Total</th>
                <td style="text-align: center;"><%= total%></td>
                <td style="text-align: center;">100%</td>
              </tr>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>
  </div>
  </div>  

  <div class="container row">
    <div class="col-sm-3">
  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p12n" role="button" aria-expanded="false" aria-controls="collapse_p12n">
      Por falta de ayuda del colegio (transporte, alimentación, útiles escolares, apoyo en la pensión, etc.)
    </a>
  </p>
  <div class="collapse" id="collapse_p12n">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p12n).having("p12n != ?", "--").having("p12n != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
      <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p12n).having("p12n != ?", "--").having("p12n != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% array.push([value, (100*item/total.to_f).round(2)]) %>   
      <%end%>
      <%= bar_chart array, colors: ["#E84E0F"] , suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% Estudiante.group(:p12n).having("p12n != ?", "--").having("p12n != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
              <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=value%></th>
                <td style="text-align: center;"><%=item%></td>
                <td style="text-align: center;"><%=(100*item/total.to_f).round(2)%></td>
              </tr>  
        <%end%>
              <tr class="table-dark" style="text-align: center;">
                <th scope="row" style="text-align: center;">Total</th>
                <td style="text-align: center;"><%= total%></td>
                <td style="text-align: center;">100%</td>
              </tr>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>
  </div>

    <div class="col-sm-3">
  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p12o" role="button" aria-expanded="false" aria-controls="collapse_p12o">
      Por cambio de lugar de residencia
    </a>
  </p>
  <div class="collapse" id="collapse_p12o">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p12o).having("p12o != ?", "--").having("p12o != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
      <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p12o).having("p12o != ?", "--").having("p12o != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% array.push([value, (100*item/total.to_f).round(2)]) %>   
      <%end%>
      <%= bar_chart array, colors: ["#E84E0F"] , suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% Estudiante.group(:p12o).having("p12o != ?", "--").having("p12o != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
              <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=value%></th>
                <td style="text-align: center;"><%=item%></td>
                <td style="text-align: center;"><%=(100*item/total.to_f).round(2)%></td>
              </tr>  
        <%end%>
              <tr class="table-dark" style="text-align: center;">
                <th scope="row" style="text-align: center;">Total</th>
                <td style="text-align: center;"><%= total%></td>
                <td style="text-align: center;">100%</td>
              </tr>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>
  </div>

    <div class="col-sm-3">
  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p12q" role="button" aria-expanded="false" aria-controls="collapse_p12q">
      Otra razón. ¿Cuál?
    </a>
  </p>
  <div class="collapse" id="collapse_p12q">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p12q).having("p12q != ?", "--").having("p12q != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
      <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p12q).having("p12q != ?", "--").having("p12q != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% array.push([value, (100*item/total.to_f).round(2)]) %>   
      <%end%>
      <%= bar_chart array, colors: ["#E84E0F"] , suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% Estudiante.group(:p12q).having("p12q != ?", "--").having("p12q != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
              <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=value%></th>
                <td style="text-align: center;"><%=item%></td>
                <td style="text-align: center;"><%=(100*item/total.to_f).round(2)%></td>
              </tr>  
        <%end%>
              <tr class="table-dark" style="text-align: center;">
                <th scope="row" style="text-align: center;">Total</th>
                <td style="text-align: center;"><%= total%></td>
                <td style="text-align: center;">100%</td>
              </tr>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>
  </div>

  <div class="col-sm-3">
  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p12p" role="button" aria-expanded="false" aria-controls="collapse_p12p">
      Las materias eran muy difíciles
    </a>
  </p>
  <div class="collapse" id="collapse_p12p">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p12p).having("p12p != ?", "--").having("p12p != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
      <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p12p).having("p12p != ?", "--").having("p12p != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% array.push([value, (100*item/total.to_f).round(2)]) %>   
      <%end%>
      <%= bar_chart array, colors: ["#E84E0F"] , suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% Estudiante.group(:p12p).having("p12p != ?", "--").having("p12p != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
              <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=value%></th>
                <td style="text-align: center;"><%=item%></td>
                <td style="text-align: center;"><%=(100*item/total.to_f).round(2)%></td>
              </tr>  
        <%end%>
              <tr class="table-dark" style="text-align: center;">
                <th scope="row" style="text-align: center;">Total</th>
                <td style="text-align: center;"><%= total%></td>
                <td style="text-align: center;">100%</td>
              </tr>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>
  </div>

  </div>

  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p12pm" role="button" aria-expanded="false" aria-controls="collapse_p12pm">
      p12pm Durante el ÚLTIMO AÑO, ¿de los siguientes problemas, cuales se han presentado en tu hogar?
    </a>
  </p>
  <div class="collapse" id="collapse_p12pm">
    <div class="card card-body">
      <% total  = 0 %>
        <% Estudiante.group(:created_at).count(:id).each do |value,item|%>
          <% total = total + item %>
        <%end%>

        <% array = [] %>
        <% Estudiante.group(:p12pm_1).where(p12pm_1: "1").having("p12pm_1 != ?", "--").having("p12pm_1 != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Matemáticas", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p12pm_2).where(p12pm_2: "1").having("p12pm_2 != ?", "--").having("p12pm_2 != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Ciencias naturales y educación ambiental", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p12pm_3).where(p12pm_3: "1").having("p12pm_3 != ?", "--").having("p12pm_3 != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Idiomas extranjeros", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p12pm_4).where(p12pm_4: "1").having("p12pm_4 != ?", "--").having("p12pm_4 != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Ciencias sociales, historia, geografía, constitución política y democracia", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p12pm_5).where(p12pm_5: "1").having("p12pm_5 != ?", "--").having("p12pm_5 != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Educación artística y Cultural", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p12pm_6).where(p12pm_6: "1").having("p12pm_6 != ?", "--").having("p12pm_6 != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Educación religiosa", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p12pm_7).where(p12pm_7: "1").having("p12pm_7 != ?", "--").having("p12pm_7 != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Educación ética y en valores humanos", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p12pm_8).where(p12pm_8: "1").having("p12pm_8 != ?", "--").having("p12pm_8 != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Tecnología e informática", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p12pm_9).where(p12pm_9: "1").having("p12pm_9 != ?", "--").having("p12pm_9 != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Humanidades, lengua castellana", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p12pm_10).where(p12pm_10: "1").having("p12pm_10 != ?", "--").having("p12pm_10 != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Educación física, recreación y deportes", (100*item/total.to_f).round(2), item]) %>
        <%end%>
    
        <% array = array.sort {|a,b| b[1] <=> a[1]} %>
        <%= bar_chart array, suffix: "%" %>
        <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
       
    </div>
  </div>
  <br>

  <div class="container">
  <h4 style="font-family: 'Heebo', sans-serif; color: #254064; text-align: left;" >P13. Cuando tienes dificultades academicas en tu colegio.....</h4>

  <div class="col-sm-4">
    <p>
      <a class="pregunta" data-toggle="collapse" href="#collapse_p13a" role="button" aria-expanded="false" aria-controls="collapse_p13a">
        a. Se establece un plan de mejoramiento/recuperación con tus padres o acudientes y el maestro de manera oportuna
      </a>
    </p>
    <div class="collapse" id="collapse_p13a">
      <div class="card card-body">
        <% total  = 0 %>
        <% Estudiante.group(:p13a).having("p13a != ?", "--").having("p13a != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% total = total + item %>
        <%end%>
        <% array = [] %>
        <% Estudiante.group(:p13a).having("p13a != ?", "--").having("p13a != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% array.push([value, (100*item/total.to_f).round(2), item]) %>   
        <%end%>
        <%= bar_chart array, colors: ["#889B77"] , suffix: "%" %>
        <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
      </div>
    </div>
    <br>
  </div>

  <div class="col-sm-4">
    <p>
      <a class="pregunta" data-toggle="collapse" href="#collapse_p13b" role="button" aria-expanded="false" aria-controls="collapse_p13b">
        b. Se establece un plan de mejoramiento/recuperación solamente con el maestro
      </a>
    </p>
    <div class="collapse" id="collapse_p13b">
      <div class="card card-body">
        <% total  = 0 %>
        <% Estudiante.group(:p13b).having("p13b != ?", "--").having("p13b != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% total = total + item %>
        <%end%>
        <% array = [] %>
        <% Estudiante.group(:p13b).having("p13b != ?", "--").having("p13b != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% array.push([value, (100*item/total.to_f).round(2), item]) %>   
        <%end%>
        <%= bar_chart array, colors: ["#889B77"] , suffix: "%" %>
        <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
      </div>
    </div>
    <br>
  </div>

  <div class="col-sm-4">
    <p>
      <a class="pregunta" data-toggle="collapse" href="#collapse_p13c" role="button" aria-expanded="false" aria-controls="collapse_p13c">
        c. Tus padres o acudientes están pendientes del plan de mejoramiento/recuperación y el apoyo que necesitas
      </a>
    </p>
    <div class="collapse" id="collapse_p13c">
      <div class="card card-body">
        <% total  = 0 %>
        <% Estudiante.group(:p13c).having("p13c != ?", "--").having("p13c != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% total = total + item %>
        <%end%>
        <% array = [] %>
        <% Estudiante.group(:p13c).having("p13c != ?", "--").having("p13c != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% array.push([value, (100*item/total.to_f).round(2), item]) %>   
        <%end%>
        <%= bar_chart array, colors: ["#889B77"] , suffix: "%" %>
        <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
      </div>
    </div>
    <br>
  </div>

  <div class="col-sm-4" style="margin-top: 20px;">
    <p>
      <a class="pregunta" data-toggle="collapse" href="#collapse_p13d" role="button" aria-expanded="false" aria-controls="collapse_p13d">
        d. Los docentes u otras personas del colegio están pendientes del plan de recuperación y te apoyan cuando lo necesitas
      </a>
    </p>
    <div class="collapse" id="collapse_p13d">
      <div class="card card-body">
        <% total  = 0 %>
        <% Estudiante.group(:p13d).having("p13d != ?", "--").having("p13d != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% total = total + item %>
        <%end%>
        <% array = [] %>
        <% Estudiante.group(:p13d).having("p13d != ?", "--").having("p13d != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% array.push([value, (100*item/total.to_f).round(2), item]) %>   
        <%end%>
        <%= bar_chart array, colors: ["#889B77"] , suffix: "%" %>
        <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
      </div>
    </div>
    <br>
  </div>

  <div class="col-sm-4" style="margin-top: 20px;">
    <p>
      <a class="pregunta" data-toggle="collapse" href="#collapse_p13e" role="button" aria-expanded="false" aria-controls="collapse_p13e">
        e. Tus compañeros de clase están pendientes de tu plan de mejoramiento/recuperación y te apoyan cuando lo necesitas
      </a>
    </p>
    <div class="collapse" id="collapse_p13e">
      <div class="card card-body">
        <% total  = 0 %>
        <% Estudiante.group(:p13e).having("p13e != ?", "--").having("p13e != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% total = total + item %>
        <%end%>
        <% array = [] %>
        <% Estudiante.group(:p13e).having("p13e != ?", "--").having("p13e != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% array.push([value, (100*item/total.to_f).round(2), item]) %>   
        <%end%>
        <%= bar_chart array, colors: ["#889B77"] , suffix: "%" %>
        <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
      </div>
    </div>
    <br>
  </div>

  <div class="col-sm-4" style="margin-top: 20px;">
    <p>
      <a class="pregunta" data-toggle="collapse" href="#collapse_p13f" role="button" aria-expanded="false" aria-controls="collapse_p13f">
        f. Te entregan un plan de mejoramiento/recuperación a tiempo
      </a>
    </p>
    <div class="collapse" id="collapse_p13f">
      <div class="card card-body">
        <% total  = 0 %>
        <% Estudiante.group(:p13f).having("p13f != ?", "--").having("p13f != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% total = total + item %>
        <%end%>
        <% array = [] %>
        <% Estudiante.group(:p13f).having("p13f != ?", "--").having("p13f != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% array.push([value, (100*item/total.to_f).round(2), item]) %>   
        <%end%>
        <%= bar_chart array, colors: ["#889B77"] , suffix: "%" %>
        <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
      </div>
    </div>
    <br>
  </div>
  </div>

  <div class="container">
  <h4 style="font-family: 'Heebo', sans-serif; color: #254064; text-align: left;" >P14. ¿Qué aspecto(s) influye(n) en tus problemas de aprendizaje y reprobación escolar?</h4>

  <div class="row">
  <div class="col-sm-4">
    <p>
      <a class="pregunta" data-toggle="collapse" href="#collapse_p14a" role="button" aria-expanded="false" aria-controls="collapse_p14a">
        a. Falta de concentración; me disperso fácilmente
      </a>
    </p>
    <div class="collapse" id="collapse_p14a">
      <div class="card card-body">
        <% total  = 0 %>
        <% Estudiante.group(:p14a).having("p14a != ?", "--").having("p14a != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% total = total + item %>
        <%end%>
        <% array = [] %>
        <% Estudiante.group(:p14a).having("p14a != ?", "--").having("p14a != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% array.push([value, (100*item/total.to_f).round(2), item]) %>   
        <%end%>
        <%= bar_chart array, colors: ["#B81A5D"] , suffix: "%" %>
        <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
      </div>
    </div>
    <br>
  </div>

  <div class="col-sm-4">
    <p>
      <a class="pregunta" data-toggle="collapse" href="#collapse_p14b" role="button" aria-expanded="false" aria-controls="collapse_p14b">
        b. Falta de organización y responsabilidad en el cumplimiento de los deberes escolares
      </a>
    </p>
    <div class="collapse" id="collapse_p14b">
      <div class="card card-body">
        <% total  = 0 %>
        <% Estudiante.group(:p14b).having("p14b != ?", "--").having("p14b != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% total = total + item %>
        <%end%>
        <% array = [] %>
        <% Estudiante.group(:p14b).having("p14b != ?", "--").having("p14b != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% array.push([value, (100*item/total.to_f).round(2), item]) %>   
        <%end%>
        <%= bar_chart array, colors: ["#B81A5D"] , suffix: "%" %>
        <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
      </div>
    </div>
    <br>
  </div>

  <div class="col-sm-4">
    <p>
      <a class="pregunta" data-toggle="collapse" href="#collapse_p14c" role="button" aria-expanded="false" aria-controls="collapse_p14c">
       c. Me intereso más en otras cosas que no tienen que ver con el estudio
      </a>
    </p>
    <div class="collapse" id="collapse_p14c">
      <div class="card card-body">
        <% total  = 0 %>
        <% Estudiante.group(:p14c).having("p14c != ?", "--").having("p14c != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% total = total + item %>
        <%end%>
        <% array = [] %>
        <% Estudiante.group(:p14c).having("p14c != ?", "--").having("p14c != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% array.push([value, (100*item/total.to_f).round(2), item]) %>   
        <%end%>
        <%= bar_chart array, colors: ["#B81A5D"] , suffix: "%" %>
        <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
      </div>
    </div>
    <br>
  </div>
</div>

<div class="row">
  <div class="col-sm-4">
    <p>
      <a class="pregunta" data-toggle="collapse" href="#collapse_p14d" role="button" aria-expanded="false" aria-controls="collapse_p14d">
       d. Considero que el estudio es importante para tener una vida exitosa
      </a>
    </p>
    <div class="collapse" id="collapse_p14d">
      <div class="card card-body">
        <% total  = 0 %>
        <% Estudiante.group(:p14d).having("p14d != ?", "--").having("p14d != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% total = total + item %>
        <%end%>
        <% array = [] %>
        <% Estudiante.group(:p14d).having("p14d != ?", "--").having("p14d != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% array.push([value, (100*item/total.to_f).round(2), item]) %>   
        <%end%>
        <%= bar_chart array, colors: ["#B81A5D"] , suffix: "%" %>
        <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
      </div>
    </div>
    <br>
  </div>

  <div class="col-sm-4">
    <p>
      <a class="pregunta" data-toggle="collapse" href="#collapse_p14e" role="button" aria-expanded="false" aria-controls="collapse_p14e">
       e. La manera como algunos docentes explican y evalúan los temas
      </a>
    </p>
    <div class="collapse" id="collapse_p14e">
      <div class="card card-body">
        <% total  = 0 %>
        <% Estudiante.group(:p14e).having("p14e != ?", "--").having("p14e != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% total = total + item %>
        <%end%>
        <% array = [] %>
        <% Estudiante.group(:p14e).having("p14e != ?", "--").having("p14e != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% array.push([value, (100*item/total.to_f).round(2), item]) %>   
        <%end%>
        <%= bar_chart array, colors: ["#B81A5D"] , suffix: "%" %>
        <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
      </div>
    </div>
    <br>
  </div>

  <div class="col-sm-4">
    <p>
      <a class="pregunta" data-toggle="collapse" href="#collapse_p14f" role="button" aria-expanded="false" aria-controls="collapse_p14f">
       f. Falta mayor seguimiento y acompañamiento de mis padres o acudientes en mi desempeño académico
      </a>
    </p>
    <div class="collapse" id="collapse_p14f">
      <div class="card card-body">
        <% total  = 0 %>
        <% Estudiante.group(:p14f).having("p14f != ?", "--").having("p14f != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% total = total + item %>
        <%end%>
        <% array = [] %>
        <% Estudiante.group(:p14f).having("p14f != ?", "--").having("p14f != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% array.push([value, (100*item/total.to_f).round(2), item]) %>   
        <%end%>
        <%= bar_chart array, colors: ["#B81A5D"] , suffix: "%" %>
        <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
      </div>
    </div>
    <br>
  </div>
</div>

<div class="row">
  <div class="col-sm-4">
    <p>
      <a class="pregunta" data-toggle="collapse" href="#collapse_p14g" role="button" aria-expanded="false" aria-controls="collapse_p14g">
      g. Mi comportamiento es adecuado durante el desarrollo de las clases
      </a>
    </p>
    <div class="collapse" id="collapse_p14g">
      <div class="card card-body">
        <% total  = 0 %>
        <% Estudiante.group(:p14g).having("p14g != ?", "--").having("p14g != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% total = total + item %>
        <%end%>
        <% array = [] %>
        <% Estudiante.group(:p14g).having("p14g != ?", "--").having("p14g != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% array.push([value, (100*item/total.to_f).round(2), item]) %>   
        <%end%>
        <%= bar_chart array, colors: ["#B81A5D"] , suffix: "%" %>
        <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
      </div>
    </div>
    <br>
  </div>

  <div class="col-sm-4">
    <p>
      <a class="pregunta" data-toggle="collapse" href="#collapse_p14h" role="button" aria-expanded="false" aria-controls="collapse_p14h">
      h. Falta de apoyo de docentes, coordinadores y orientadores del colegio
      </a>
    </p>
    <div class="collapse" id="collapse_p14h">
      <div class="card card-body">
        <% total  = 0 %>
        <% Estudiante.group(:p14h).having("p14h != ?", "--").having("p14h != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% total = total + item %>
        <%end%>
        <% array = [] %>
        <% Estudiante.group(:p14h).having("p14h != ?", "--").having("p14h != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% array.push([value, (100*item/total.to_f).round(2), item]) %>   
        <%end%>
        <%= bar_chart array, colors: ["#B81A5D"] , suffix: "%" %>
        <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
      </div>
    </div>
    <br>
  </div>

  <div class="col-sm-4">
    <p>
      <a class="pregunta" data-toggle="collapse" href="#collapse_p14i" role="button" aria-expanded="false" aria-controls="collapse_p14i">
      i. Las clases son aburridas y poco motivantes
      </a>
    </p>
    <div class="collapse" id="collapse_p14i">
      <div class="card card-body">
        <% total  = 0 %>
        <% Estudiante.group(:p14i).having("p14i != ?", "--").having("p14i != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% total = total + item %>
        <%end%>
        <% array = [] %>
        <% Estudiante.group(:p14i).having("p14i != ?", "--").having("p14i != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% array.push([value, (100*item/total.to_f).round(2), item]) %>   
        <%end%>
        <%= bar_chart array, colors: ["#B81A5D"] , suffix: "%" %>
        <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
      </div>
    </div>
    <br>
  </div>
</div>
</div>

<p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p15" role="button" aria-expanded="false" aria-controls="collapse_p15">
      P15. Cuando tienes dificultades academicas en tu colegio encuentras apoyo en...
    </a>
  </p>
  <div class="collapse" id="collapse_p15">
    <div class="card card-body">
      <% total  = 0 %>
        <% Estudiante.group(:created_at).count(:id).each do |value,item|%>
          <% total = total + item %>
        <%end%>

        <% array = [] %>
        <% Estudiante.group(:p15a).where(p15a: "1").having("p15a != ?", "--").having("p15a != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Tus padres o acudientes", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p15b).where(p15b: "2").having("p15b != ?", "--").having("p15b != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Tus docentes", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p15c).where(p15c: "3").having("p15c != ?", "--").having("p15c != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Tus coordinadores o el rector", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p15d).where(p15d: "4").having("p15d != ?", "--").having("p15d != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Tus orientadores", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p15e).where(p15e: "5").having("p15e != ?", "--").having("p15e != ?", "").count(:id).each do |value,item|%>
          <% array.push(["Tus compañeros de curso", (100*item/total.to_f).round(2), item]) %>
        <%end%>
        <% Estudiante.group(:p15f).where(p15f: "6").having("p15f != ?", "--").having("p15f != ?", "").count(:id).each do |value,item|%>
          <% array.push(["De otras personas; amigos o conocidos", (100*item/total.to_f).round(2), item]) %>
        <%end%>
    
        <% array = array.sort {|a,b| b[1] <=> a[1]} %>
        <%= column_chart array, suffix: "%" %>
         <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>

  <div class="container">
  <h4 style="font-family: 'Heebo', sans-serif; color: #254064; text-align: left;" >P16. Afirmaciones</h4>
  
  <div class="col-sm-4">
    <p>
      <a class="pregunta" data-toggle="collapse" href="#collapse_p16a" role="button" aria-expanded="false" aria-controls="collapse_p16a">
      a. ¿Conoces el sistema de evaluación de la institución educativa?
      </a>
    </p>
    <div class="collapse" id="collapse_p16a">
      <div class="card card-body">
        <% total  = 0 %>
        <% Estudiante.group(:p16a).having("p16a != ?", "--").having("p16a != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% total = total + item %>
        <%end%>
        <% array = [] %>
        <% Estudiante.group(:p16a).having("p16a != ?", "--").having("p16a != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% array.push([value, (100*item/total.to_f).round(2), item]) %>   
        <%end%>
        <%= bar_chart array, colors: ["#B81A5D"] , suffix: "%" %>
        <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
      </div>
    </div>
    <br>
  </div>

  <div class="col-sm-4">
    <p>
      <a class="pregunta" data-toggle="collapse" href="#collapse_p16b" role="button" aria-expanded="false" aria-controls="collapse_p16b">
      b. ¿Consideras que es clara la forma en que te evaluan en cada materia o asignatura?
      </a>
    </p>
    <div class="collapse" id="collapse_p16b">
      <div class="card card-body">
        <% total  = 0 %>
        <% Estudiante.group(:p16b).having("p16b != ?", "--").having("p16b != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% total = total + item %>
        <%end%>
        <% array = [] %>
        <% Estudiante.group(:p16b).having("p16b != ?", "--").having("p16b != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% array.push([value, (100*item/total.to_f).round(2), item]) %>   
        <%end%>
        <%= bar_chart array, colors: ["#B81A5D"] , suffix: "%" %>
        <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
      </div>
    </div>
    <br>
  </div>

  <div class="col-sm-4">
    <p>
      <a class="pregunta" data-toggle="collapse" href="#collapse_p16c" role="button" aria-expanded="false" aria-controls="collapse_p16c">
      c. ¿Los profesores explican al inicio del periodo cómo y qué cosas van a calificar/evaluar?
      </a>
    </p>
    <div class="collapse" id="collapse_p16c">
      <div class="card card-body">
        <% total  = 0 %>
        <% Estudiante.group(:p16c).having("p16c != ?", "--").having("p16c != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% total = total + item %>
        <%end%>
        <% array = [] %>
        <% Estudiante.group(:p16c).having("p16c != ?", "--").having("p16c != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% array.push([value, (100*item/total.to_f).round(2), item]) %>   
        <%end%>
        <%= bar_chart array, colors: ["#B81A5D"] , suffix: "%" %>
        <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
      </div>
    </div>
    <br>
  </div>

  <div class="col-sm-4">
    <p>
      <a class="pregunta" data-toggle="collapse" href="#collapse_p16d" role="button" aria-expanded="false" aria-controls="collapse_p16d">
      d. ¿El docente respeta la forma de evaluacion acordada y socializada al inicio del año o de cada periodo?
      </a>
    </p>
    <div class="collapse" id="collapse_p16d">
      <div class="card card-body">
        <% total  = 0 %>
        <% Estudiante.group(:p16d).having("p16d != ?", "--").having("p16d != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% total = total + item %>
        <%end%>
        <% array = [] %>
        <% Estudiante.group(:p16d).having("p16d != ?", "--").having("p16d != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% array.push([value, (100*item/total.to_f).round(2), item]) %>   
        <%end%>
        <%= bar_chart array, colors: ["#B81A5D"] , suffix: "%" %>
        <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
      </div>
    </div>
    <br>
  </div>

  <div class="col-sm-4">
    <p>
      <a class="pregunta" data-toggle="collapse" href="#collapse_p16e" role="button" aria-expanded="false" aria-controls="collapse_p16e">
     e. ¿La forma de evaluar de los docentes es acorde a lo aprendido y realizado en clase?
      </a>
    </p>
    <div class="collapse" id="collapse_p16e">
      <div class="card card-body">
        <% total  = 0 %>
        <% Estudiante.group(:p16e).having("p16e != ?", "--").having("p16e != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% total = total + item %>
        <%end%>
        <% array = [] %>
        <% Estudiante.group(:p16e).having("p16e != ?", "--").having("p16e != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% array.push([value, (100*item/total.to_f).round(2), item]) %>   
        <%end%>
        <%= bar_chart array, colors: ["#B81A5D"] , suffix: "%" %>
        <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
      </div>
    </div>
    <br>
  </div>

  <div class="col-sm-4">
    <p>
      <a class="pregunta" data-toggle="collapse" href="#collapse_p16f" role="button" aria-expanded="false" aria-controls="collapse_p16f">
     f. ¿El docente o director de grupo te pregunta cómo te sientes con la forma en que te evalúan?
      </a>
    </p>
    <div class="collapse" id="collapse_p16f">
      <div class="card card-body">
        <% total  = 0 %>
        <% Estudiante.group(:p16f).having("p16f != ?", "--").having("p16f != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% total = total + item %>
        <%end%>
        <% array = [] %>
        <% Estudiante.group(:p16f).having("p16f != ?", "--").having("p16f != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% array.push([value, (100*item/total.to_f).round(2), item]) %>   
        <%end%>
        <%= bar_chart array, colors: ["#B81A5D"] , suffix: "%" %>
        <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
      </div>
    </div>
    <br>
  </div>

  <div class="col-sm-4">
    <p>
      <a class="pregunta" data-toggle="collapse" href="#collapse_p16g" role="button" aria-expanded="false" aria-controls="collapse_p16g">
     g. ¿Tú y tus compañeros participan en la construcción de la nota definitiva?
      </a>
    </p>
    <div class="collapse" id="collapse_p16g">
      <div class="card card-body">
        <% total  = 0 %>
        <% Estudiante.group(:p16g).having("p16g != ?", "--").having("p16g != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% total = total + item %>
        <%end%>
        <% array = [] %>
        <% Estudiante.group(:p16g).having("p16g != ?", "--").having("p16g != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% array.push([value, (100*item/total.to_f).round(2), item]) %>   
        <%end%>
        <%= bar_chart array, colors: ["#B81A5D"] , suffix: "%" %>
        <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
      </div>
    </div>
    <br>
  </div>
</div>

  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p17" role="button" aria-expanded="false" aria-controls="collapse_p17">
     P17. ¿Alguna vez te has retirado de estudiar?
    </a>
  </p>
  <div class="collapse" id="collapse_p17">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p17).having("p17 != ?", "--").having("p17 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p17).having("p17 != ?", "--").having("p17 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% array.push([value, (100*item/total.to_f).round(2), item]) %>   
      <%end%>
      <%= pie_chart array, suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>

   <div class="container row">
  <h4 style="font-family: 'Heebo', sans-serif; color: #254064; text-align: left;" >P17b.  Esa vez te retiraste…..</h4>
  
  <div class="col-sm-4">
  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p17b_1" role="button" aria-expanded="false" aria-controls="collapse_p17b_1">
     La primera vez que dejaste de estudiar…
    </a>
  </p>
  <div class="collapse" id="collapse_p17b_1">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p17b_1).having("p17b_1 != ?", "--").having("p17b_1 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p17b_1).having("p17b_1 != ?", "--").having("p17b_1 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
           <% if (value == "1") %>
              <%valor = "Antes de terminar el curso"%>
            <% elsif (value == "2") %>
              <%valor = "Después de finalizar el curso"%>
            <% elsif (value == "99") %>
              <%valor = "NS / NR"%>
            <% end %>
          <% array.push([valor, (100*item/total.to_f).round(2), item]) %>   
      <%end%>
      <%= pie_chart array, suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>
  </div>

  <div class="col-sm-4">
  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p17b_2" role="button" aria-expanded="false" aria-controls="collapse_p17b_2">
     La segunda vez que dejaste de estudiar…
    </a>
  </p>
  <div class="collapse" id="collapse_p17b_2">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p17b_2).having("p17b_2 != ?", "--").having("p17b_2 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p17b_2).having("p17b_2 != ?", "--").having("p17b_2 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
           <% if (value == "1") %>
              <%valor = "Antes de terminar el curso"%>
            <% elsif (value == "2") %>
              <%valor = "Después de finalizar el curso"%>
            <% elsif (value == "99") %>
              <%valor = "NS / NR"%>
            <% end %>
          <% array.push([valor, (100*item/total.to_f).round(2), item]) %>   
      <%end%>
      <%= pie_chart array, suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>
  </div>

  <div class="col-sm-4">
  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p17b_3" role="button" aria-expanded="false" aria-controls="collapse_p17b_3">
     La tercera vez que dejaste de estudiar…
    </a>
  </p>
  <div class="collapse" id="collapse_p17b_3">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p17b_3).having("p17b_3 != ?", "--").having("p17b_3 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p17b_3).having("p17b_3 != ?", "--").having("p17b_3 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
           <% if (value == "1") %>
              <%valor = "Antes de terminar el curso"%>
            <% elsif (value == "2") %>
              <%valor = "Después de finalizar el curso"%>
            <% elsif (value == "99") %>
              <%valor = "NS / NR"%>
            <% end %>
          <% array.push([valor, (100*item/total.to_f).round(2), item]) %>   
      <%end%>
      <%= pie_chart array, suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>
  </div>

  <div class="col-sm-4">
  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p17b_4" role="button" aria-expanded="false" aria-controls="collapse_p17b_4">
     La cuarta vez que dejaste de estudiar…
    </a>
  </p>
  <div class="collapse" id="collapse_p17b_4">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p17b_4).having("p17b_4 != ?", "--").having("p17b_4 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p17b_4).having("p17b_4 != ?", "--").having("p17b_4 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
           <% if (value == "1") %>
              <%valor = "Antes de terminar el curso"%>
            <% elsif (value == "2") %>
              <%valor = "Después de finalizar el curso"%>
            <% elsif (value == "99") %>
              <%valor = "NS / NR"%>
            <% end %>
          <% array.push([valor, (100*item/total.to_f).round(2), item]) %>   
      <%end%>
      <%= pie_chart array, suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>
  </div>
  </div>

  <div class="container row">
  <h4 style="font-family: 'Heebo', sans-serif; color: #254064; text-align: left;" >P17c.  ¿Cuánto tiempo dejaste de estudiar esa vez?</h4>
  
  <div class="col-sm-4">
  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p17c_1" role="button" aria-expanded="false" aria-controls="collapse_p17c_1">
     La primera vez que dejaste de estudiar…
    </a>
  </p>
  <div class="collapse" id="collapse_p17c_1">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p17c_1).having("p17c_1 != ?", "--").having("p17c_1 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p17c_1).having("p17c_1 != ?", "--").having("p17c_1 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
           <% if (value == "1") %>
              <%valor = "Menos de un año"%>
            <% elsif (value == "2") %>
              <%valor = "Un año o más"%>
            <% elsif (value == "99") %>
              <%valor = "NS / NR"%>
            <% end %>
          <% array.push([valor, (100*item/total.to_f).round(2), item]) %>   
      <%end%>
      <%= pie_chart array, suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>
  </div>

  <div class="col-sm-4">
  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p17c_2" role="button" aria-expanded="false" aria-controls="collapse_p17c_2">
     La segunda vez que dejaste de estudiar…
    </a>
  </p>
  <div class="collapse" id="collapse_p17c_2">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p17c_2).having("p17c_2 != ?", "--").having("p17c_2 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p17c_2).having("p17c_2 != ?", "--").having("p17c_2 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
           <% if (value == "1") %>
              <%valor = "Menos de un año"%>
            <% elsif (value == "2") %>
              <%valor = "Un año o más"%>
            <% elsif (value == "99") %>
              <%valor = "NS / NR"%>
            <% end %>
          <% array.push([valor, (100*item/total.to_f).round(2), item]) %>   
      <%end%>
      <%= pie_chart array, suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>
  </div>

  <div class="col-sm-4">
  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p17c_3" role="button" aria-expanded="false" aria-controls="collapse_p17c_3">
     La tercera vez que dejaste de estudiar…
    </a>
  </p>
  <div class="collapse" id="collapse_p17c_3">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p17c_3).having("p17c_3 != ?", "--").having("p17c_3 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p17c_3).having("p17c_3 != ?", "--").having("p17c_3 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
           <% if (value == "1") %>
              <%valor = "Menos de un año"%>
            <% elsif (value == "2") %>
              <%valor = "Un año o más"%>
            <% elsif (value == "99") %>
              <%valor = "NS / NR"%>
            <% end %>
          <% array.push([valor, (100*item/total.to_f).round(2), item]) %>   
      <%end%>
      <%= pie_chart array, suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>
  </div>

  <div class="col-sm-4">
  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p17c_4" role="button" aria-expanded="false" aria-controls="collapse_p17c_4">
     La cuarta vez que dejaste de estudiar…
    </a>
  </p>
  <div class="collapse" id="collapse_p17c_4">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p17c_4).having("p17c_4 != ?", "--").having("p17c_4 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p17c_4).having("p17c_4 != ?", "--").having("p17c_4 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
           <% if (value == "1") %>
              <%valor = "Menos de un año"%>
            <% elsif (value == "2") %>
              <%valor = "Un año o más"%>
            <% elsif (value == "99") %>
              <%valor = "NS / NR"%>
            <% end %>
          <% array.push([valor, (100*item/total.to_f).round(2), item]) %>   
      <%end%>
      <%= pie_chart array, suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>
  </div>
  </div>

  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p18" role="button" aria-expanded="false" aria-controls="collapse_p18">
     P18. La última vez que te retiraste de estudiar, ¿en qué mes te retiraste?
    </a>
  </p>
  <div class="collapse" id="collapse_p18">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p18).having("p18 != ?", "--").having("p18 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p18).having("p18 != ?", "--").having("p18 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%> 
        <%valor =""%> 
        <% if (value == "1") %>
          <%valor = "Enero"%>
        <% elsif (value == "2") %>
          <%valor = "Febrero"%>
        <% elsif (value == "3") %>
          <%valor = "Marzo"%>
        <% elsif (value == "4") %>
          <%valor = "Abril"%>
        <% elsif (value == "5") %>
          <%valor = "Mayo"%>
        <% elsif (value == "6") %>
          <%valor = "Junio"%>
        <% elsif (value == "7") %>
          <%valor = "Julio"%>
        <% elsif (value == "8") %>
          <%valor = "Agosto"%>
        <% elsif (value == "9") %>
          <%valor = "Septiembre"%>
        <% elsif (value == "10") %>
          <%valor = "Octubre"%>
        <% elsif (value == "11") %>
          <%valor = "Noviembre"%>
        <% elsif (value == "12") %>
          <%valor = "Diciembre"%>
        <% elsif (value == "99") %>
          <%valor = "No me acuerdo"%>
        <% elsif (value == "99999") %>
          <%valor = "No contestó"%>
        <% end %>
        <% array.push([valor, (100*item/total.to_f).round(2), item]) %> 
      <%end%>
      <%= column_chart array, suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>

  <div class="container">
  <h4 style="font-family: 'Heebo', sans-serif; color: #254064; text-align: left;" >P20. La última vez que se retiró de estudiar</h4>

  <div class="col-sm-4">
    <p>
      <a class="pregunta" data-toggle="collapse" href="#collapse_p20a" role="button" aria-expanded="false" aria-controls="collapse_p20a">
     a. ...pasaste el año pero no te matriculaste en el siguiente
      </a>
    </p>
    <div class="collapse" id="collapse_p20a">
      <div class="card card-body">
        <% total  = 0 %>
        <% Estudiante.group(:p20a).having("p20a != ?", "--").having("p20a != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% total = total + item %>
        <%end%>
        <% array = [] %>
        <% Estudiante.group(:p20a).having("p20a != ?", "--").having("p20a != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% if (value == "si") %>
          <%valor = "Si"%>
          <% elsif (value == "no") %>
            <%valor = "No"%>
          <% elsif (value == "99") %>
            <%valor = "No Responde"%>
        <% end %>
        <% array.push([valor, (100*item/total.to_f).round(2), item]) %>   
        <%end%>
        <%= bar_chart array, colors: ["#B81A5D"] , suffix: "%" %>
        <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
      </div>
    </div>
    <br>
  </div>

  <div class="col-sm-4">
    <p>
      <a class="pregunta" data-toggle="collapse" href="#collapse_p20b" role="button" aria-expanded="false" aria-controls="collapse_p20b">
     b. ...perdiste el año y no te matriculaste al siguiente año
      </a>
    </p>
    <div class="collapse" id="collapse_p20b">
      <div class="card card-body">
        <% total  = 0 %>
        <% Estudiante.group(:p20b).having("p20b != ?", "--").having("p20b != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% total = total + item %>
        <%end%>
        <% array = [] %>
        <% Estudiante.group(:p20b).having("p20b != ?", "--").having("p20b != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% if (value == "si") %>
            <%valor = "Si"%>
            <% elsif (value == "no") %>
              <%valor = "No"%>
            <% elsif (value == "99") %>
              <%valor = "No Responde"%>
          <% end %>
        <% array.push([valor, (100*item/total.to_f).round(2), item]) %>  
        <%end%>
        <%= bar_chart array, colors: ["#B81A5D"] , suffix: "%" %>
        <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
      </div>
    </div>
    <br>
  </div>

  <div class="col-sm-4">
    <p>
      <a class="pregunta" data-toggle="collapse" href="#collapse_p20c" role="button" aria-expanded="false" aria-controls="collapse_p20c">
     c. ...dejaste de estudiar antes de terminar el año
      </a>
    </p>
    <div class="collapse" id="collapse_p20c">
      <div class="card card-body">
        <% total  = 0 %>
        <% Estudiante.group(:p20c).having("p20c != ?", "--").having("p20c != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
        <% total = total + item %>
        <%end%>
        <% array = [] %>
        <% Estudiante.group(:p20c).having("p20c != ?", "--").having("p20c != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% if (value == "si") %>
            <%valor = "Si"%>
            <% elsif (value == "no") %>
              <%valor = "No"%>
            <% elsif (value == "99") %>
              <%valor = "No Responde"%>
          <% end %>
          <% array.push([valor, (100*item/total.to_f).round(2), item]) %>  
        <%end%>
        <%= bar_chart array, colors: ["#B81A5D"] , suffix: "%" %>
        <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
      </div>
    </div>
    <br>
  </div>
</div>

  <p>
    <a class="pregunta" data-toggle="collapse" href="#collapse_p23" role="button" aria-expanded="false" aria-controls="collapse_p23">
     P23.¿Ese colegio era público (oficial) o privado (no oficial)?
    </a>
  </p>
  <div class="collapse" id="collapse_p23">
    <div class="card card-body">
      <% total  = 0 %>
      <% Estudiante.group(:p23).having("p23 != ?", "--").having("p23 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>
          <% total = total + item %>
      <%end%>
      <% array = [] %>
      <% Estudiante.group(:p23).having("p23 != ?", "--").having("p23 != ?", "").order('COUNT(id) DESC').count(:id).each do |value,item|%>  
        <% if (value == "publico") %>
          <%valor = "Público"%>
        <% elsif (value == "privado") %>
          <%valor = "Privado"%>
        <% end %>
        <% array.push([valor, (100*item/total.to_f).round(2), item]) %> 
      <%end%>
      <%= column_chart array, suffix: "%" %>
      <br>
        <div style="text-align: center;">
        <table class="table table-bordered" style="width: 80%; text-align: center;">
              <thead>
                <tr style="text-align: center;">
                  <th scope="col" style="text-align: center;">Valor</th>
                  <th scope="col" style="text-align: center;">Cantidad</th>
                  <th scope="col" style="text-align: center;">%</th>
                </tr>
              </thead>
              <tbody>
        <% array.each do |p| %>
               <tr style="text-align: center;">
                <th scope="row" style="text-align: center;"><%=p[0]%></th>
                <td style="text-align: center;"><%=p[2]%></td>
                <td style="text-align: center;"><%=p[1]%></td>
              </tr>  
        <%end%>
              </tbody>
        </table>
        </div>
    </div>
  </div>
  <br>





 
<%= render 'index4', estudiante: @estudiante %>
<%= render 'index2', estudiante: @estudiante %>
<%= render 'index3', estudiante: @estudiante %>








<div class="hidden">
<table>
  <thead>
    <tr>
      <th>P1</th>
      <th>P2</th>
      <th>P3</th>
      <th>P4</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @estudiantes.each do |estudiante| %>
      <tr>
        <td><%= estudiante.p1 %></td>
        <td><%= estudiante.p2 %></td>
        <td><%= estudiante.p3 %></td>
        <td><%= link_to 'Show', estudiante %></td>
        <td><%= link_to 'Edit', edit_estudiante_path(estudiante) %></td>
        <td><%= link_to 'Destroy', estudiante, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>
</div>

<% link_to 'New Estudiante', new_estudiante_path %>
